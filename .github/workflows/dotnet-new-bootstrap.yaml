on:
  schedule:
    - cron: '40 5 * * *'
  workflow_dispatch: {}

permissions:
  contents: write

defaults:
  run:
    shell: pwsh

jobs:
  run-bootstrap:
    strategy:
      matrix:
        template:
          - name: THNETII.DotnetNew.WebStatic
            invoke: web
    runs-on: ubuntu-latest
    name: ${{ matrix.template.name }}
    steps:
      - name: Chekout ${{ github.repository }}@${{ github.ref }}
        uses: actions/checkout@v2
        with:
          persist-credentials: true
      - name: Delete files in target directory
        run: |
          $TargetDirectory = Join-Path "src" "${{ matrix.template.name }}"
          Remove-Item -Recurse -Force -ErrorAction Continue $TargetDirectory
      - name: Invoke dotnet new ${{ matrix.template.invoke }}
        shell: bash
        run: dotnet new ${{ matrix.template.invoke }} -o "src/${{ matrix.template.name }}"

